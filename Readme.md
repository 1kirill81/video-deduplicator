# Video Frame Deduplicator

Утилита для удаления дубликатов кадров из видеофайлов на основе сравнения MSE (Mean Squared Error).

# Возможности

- Удаление последовательных дубликатов кадров из видео
- Настройка порога схожести кадров
- Пропуск кадров для ускорения обработки
- Автоматический пересчет FPS для сохранения длительности видео
- Поддержка интерактивного и пакетного режимов работы

# Установка и запуск

## Способ 1: Запуск через Docker 

1. Убедитесь, что установлены Docker и Docker Compose
2. Клонируйте или скачайте файлы проекта
3. Соберите образ: `docker-compose build`

### Запуск в интерактивном режиме
`docker-compose run video-deduplicator`

Далее введите все требуемые параметры:

1. Путь к исходному видеофайлу

    В папке проекта после сборки должна появиться папка `input` (если не 
появилась, создайте вручную). Туда поместите исходное видео.

    Пример ввода пути: `input/video.mp4`

2. Путь для сохранения результата
   
   Рекомендуется сохранять в папку `output`, 
   которая так же появится после запуска.

3. Порог схожести кадров (по умолчанию: 1000.0)

4. Пропуск кадров (по умолчанию: 1)

5. Рассчитать новый FPS для сохранения длительности

После обработки, видео сохраниться в выбранную папку


### Запуск с аргументами

`docker-compose run video-deduplicator --input /app/input/video.mp4 --output /app/output/processed.mp4 --threshold 1000 --skip-frames 1 --new-fps`

## Способ 2: Запуск напрямую в Python

1. Установите зависимости:
`pip install -r requirements.txt`

2. Запустите скрипт:
`python mse_console.py`

### Интерактивный режим
`python mse_console.py`
 
### Или с аргументами
`python mse_console.py --input input_video.mp4 --output output_video.mp4 --threshold 1000 --skip-frames 1 --new-fps`

## Параметры командной строки при запуске с аргументами
- `--input` - путь к исходному видеофайлу

- `--output` - путь для сохранения результата

- `--threshold` - порог схожести кадров (по умолчанию: 1000.0)

- `--skip-frames` - пропуск кадров (по умолчанию: 1)

- `--new-fps` - рассчитать новый FPS для сохранения длительности

## Примечания
- Порог схожести (threshold): Чем меньше, тем строже сравнение 
- Пропуск кадров (skip-frames): 1-обрабатывает все кадры (медленнее) 2-5: пропускает кадры для ускорения обработки
- Пересчет FPS (new-fps): Включите для сохранения оригинальной длительности видео, отключите для сохранения оригинального FPS

## Требования
- Python 3.7+
- OpenCV 4.x
- NumPy